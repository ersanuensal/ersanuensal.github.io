import{r as S,c as J,a as E,b as $,o as d,d as u,e as t,f as M,w as k,g as C,h as _,u as z,i as P,j as n,F as D,k as R,t as v,l as h,v as f,m as q,n as F,p as B,q as O,s as Y,x as Z,y as K,z as H,A as X,B as Q,C as W}from"./vendor.163acdc1.js";const ee=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))e(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function l(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(a){if(a.ep)return;a.ep=!0;const c=l(a);fetch(a.href,c)}};ee();const G=S({user:null}),te={setUser(i){G.user=i?i.user:null}};var j={state:G,methods:te};const se="https://oyioqvxlilouegwbeekh.supabase.co",re="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQzMDQ0MjY5LCJleHAiOjE5NTg2MjAyNjl9.kTzSGH01qKcDB7tuNFODKL20eBZZm8srXFI02ZVFOD8",g=J(se,re);var oe="assets/logo.7c8b451f.png",A=(i,s)=>{const l=i.__vccOpts||i;for(const[e,a]of s)l[e]=a;return l};const ae={setup(){const i=E(()=>j.state.user),s=z();return{logout:async()=>{await g.auth.signOut(),s.push({name:"Login"})},user:i}}},ie={class:"bg-primaryc text-white"},ne={class:"container py-5 px-4 flex flex-col gap-4 items-center sm:flex-row"},le=t("div",{class:"flex items-center gap-x-4"},[t("img",{class:"h-10",src:oe,alt:""})],-1),ce={class:"flex flex-1 justify-end gap-x-10"},de=P("Home"),ue=P("Create an Activity"),me=P("Login"),pe=P("Register"),ve=P("Profile");function ye(i,s,l,e,a,c){const r=$("router-link");return d(),u("header",ie,[t("nav",ne,[le,t("ul",ce,[M(r,{class:"cursor-pointer",to:{name:"Home"}},{default:k(()=>[de]),_:1}),e.user?(d(),C(r,{key:0,class:"cursor-pointer",to:{name:"Activity"}},{default:k(()=>[ue]),_:1})):_("",!0),e.user?_("",!0):(d(),C(r,{key:1,class:"cursor-pointer",to:{name:"Login"}},{default:k(()=>[me]),_:1})),e.user?_("",!0):(d(),C(r,{key:2,class:"cursor-pointer",to:{name:"Register"}},{default:k(()=>[pe]),_:1})),e.user?(d(),C(r,{key:3,class:"cursor-pointer",to:{name:"Profile"}},{default:k(()=>[ve]),_:1})):_("",!0),e.user?(d(),u("li",{key:4,onClick:s[0]||(s[0]=(...o)=>e.logout&&e.logout(...o)),class:"cursor-pointer"},"Logout")):_("",!0)])])])}var _e=A(ae,[["render",ye]]);const he={components:{Navigation:_e},setup(){const i=n(null);return g.auth.user()||(i.value=!0),g.auth.onAuthStateChange((l,e)=>{j.methods.setUser(e),i.value=!0}),{appReady:i}}},fe={key:0,class:"min-h-full font-Poppins box-border"};function xe(i,s,l,e,a,c){const r=$("Navigation"),o=$("router-view");return e.appReady?(d(),u("div",fe,[M(r),M(o)])):_("",!0)}var ge=A(he,[["render",xe]]);const be={name:"home",components:{},setup(){const i=n([]),s=n(null);return(async()=>{try{const{data:e,error:a}=await g.from("activities").select("*");if(a)throw a;i.value=e,s.value=!0}catch(e){console.warn(e.message)}})(),{data:i,dataLoaded:s}}},we={key:0,class:"container mt-10 px-4"},Ae={key:0,class:"w-full flex flex-col items-center"},ke=t("h1",{class:"text-2xl"},"There are no Activities yet.",-1),$e=P("Create the first One"),Ue={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},Le={class:"mt-2 py-1 px-3 text-xs text-white bg-primaryc shadow-md rounded-lg"},Me={class:"mt-2 text-center text-xl text-white"},Pe={class:"mt-2 text-center text-xs text-white"},Ie={class:"mt-2 text-center text-xs text-white"};function Ve(i,s,l,e,a,c){const r=$("router-link");return e.dataLoaded?(d(),u("div",we,[e.data.length===0?(d(),u("div",Ae,[ke,M(r,{class:"mt-6 py-2 px-6 rounded-sm text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",to:{name:"Activity"}},{default:k(()=>[$e]),_:1})])):(d(),u("div",Ue,[(d(!0),u(D,null,R(e.data,(o,m)=>(d(),C(r,{class:"flex flex-col items-center bg-primaryc p-8 shadow-md cursor-pointer",to:{name:"ViewActivity",params:{id:o.id}},key:m},{default:k(()=>[t("p",Le,v(o.date),1),t("h1",Me,v(o.name),1),t("p",Pe," In "+v(o.location)+" at "+v(o.time),1),t("p",Ie,v(o.members.length)+" people participating ",1)]),_:2},1032,["to"]))),128))]))])):_("",!0)}var Ce=A(be,[["render",Ve]]);const Te={name:"login",setup(){const i=z(),s=n(null),l=n(null),e=n(null);return{email:s,password:l,errorMsg:e,login:async()=>{try{const{error:c}=await g.auth.signIn({email:s.value,password:l.value});if(c)throw c;i.push({name:"Home"})}catch(c){e.value=c.message,setTimeout(()=>{e.value=null},5e3)}}}}},Ne={class:"max-w-screen-sm mx-auto px-4 py-10"},qe={key:0,class:"mb-10 p-4 rounded-md bg-light-grey"},Oe={class:"text-red-600"},je=t("h1",{class:"text-3 text-primaryc mb-4"},"Login",-1),ze={class:"flex flex-col mb-2"},De=t("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),Re={class:"flex flex-col mb-2"},Se=t("label",{for:"Password",class:"mb-1 text-sm text-primaryc"},"Password",-1),Je=t("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Login ",-1),Ee=P(" You don't have an account? "),Fe=t("span",{class:"text-primaryc"},"Register",-1);function Be(i,s,l,e,a,c){const r=$("router-link");return d(),u("div",Ne,[e.errorMsg?(d(),u("div",qe,[t("p",Oe,v(e.errorMsg),1)])):_("",!0),t("form",{onSubmit:s[2]||(s[2]=q((...o)=>e.login&&e.login(...o),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[je,t("div",ze,[De,h(t("input",{type:"text",id:"email","onUpdate:modelValue":s[0]||(s[0]=o=>e.email=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.email]])]),t("div",Re,[Se,h(t("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=o=>e.password=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.password]])]),Je,M(r,{class:"text-sm text-black mt-6 text-center",to:{name:"Register"}},{default:k(()=>[Ee,Fe]),_:1})],32)])}var He=A(Te,[["render",Be]]);const Ge={name:"register",setup(){const i=z(),s=n(null),l=n(null),e=n(null),a=n(null);return{email:s,password:l,confirmPassword:e,errorMsg:a,register:async()=>{if(l.value===e.value){try{const{error:r}=await g.auth.signUp({email:s.value,password:l.value});if(r)throw r;i.push({name:"Login"})}catch(r){a.value=r.message,setTimeout(()=>{a.value=null},5e3)}return}a.value="Error: Passwords do not match",setTimeout(()=>{a.value=null},5e3)}}}},Ye={class:"max-w-screen-sm mx-auto px-4 py-10"},Ze={key:0,class:"mb-10 p-4 rounded-md bg-light-grey"},Ke={class:"text-red-600"},Xe=t("h1",{class:"text-3 text-primaryc mb-4"},"Register",-1),Qe={class:"flex flex-col mb-2"},We=t("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),et={class:"flex flex-col mb-2"},tt=t("label",{for:"Password",class:"mb-1 text-sm text-primaryc"},"Password",-1),st={class:"flex flex-col mb-2"},rt=t("label",{for:"confirmPassword",class:"mb-1 text-sm text-primaryc"},"Confirm Password",-1),ot=t("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"},"Register",-1),at=P(" Already registered? "),it=t("span",{class:"text-primaryc"},"Login",-1);function nt(i,s,l,e,a,c){const r=$("router-link");return d(),u("div",Ye,[e.errorMsg?(d(),u("div",Ze,[t("p",Ke,v(e.errorMsg),1)])):_("",!0),t("form",{onSubmit:s[3]||(s[3]=q((...o)=>e.register&&e.register(...o),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[Xe,t("div",Qe,[We,h(t("input",{type:"text",id:"email","onUpdate:modelValue":s[0]||(s[0]=o=>e.email=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.email]])]),t("div",et,[tt,h(t("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=o=>e.password=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.password]])]),t("div",st,[rt,h(t("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":s[2]||(s[2]=o=>e.confirmPassword=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.confirmPassword]])]),ot,M(r,{class:"text-sm text-black mt-6 text-center",to:{name:"Login"}},{default:k(()=>[at,it]),_:1})],32)])}var lt=A(Ge,[["render",nt]]);const ct="https://oyioqvxlilouegwbeekh.supabase.co",dt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQzMDQ0MjY5LCJleHAiOjE5NTg2MjAyNjl9.kTzSGH01qKcDB7tuNFODKL20eBZZm8srXFI02ZVFOD8",I=J(ct,dt),T=S({user:{}});const ut={props:{path:String},emits:["upload","update:path"],setup(i,{emit:s}){const{path:l}=F(i),e=n("10em"),a=n(!1),c=n(""),r=n(),o=async()=>{try{const{data:p,error:y}=await I.storage.from("avatars").download(l.value);if(y)throw y;c.value=URL.createObjectURL(p)}catch(p){console.error("Error downloading image: ",p.message)}},m=async p=>{r.value=p.target.files;try{if(a.value=!0,!r.value||r.value.length===0)throw new Error("You must select an image to upload.");const y=r.value[0],U=y.name.split(".").pop(),V=`${`${Math.random()}.${U}`}`;let{error:b}=await I.storage.from("avatars").upload(V,y);if(b)throw b;s("update:path",V),s("upload")}catch(y){alert(y.message)}finally{a.value=!1}};return B(l,()=>{l.value&&o()}),{path:l,size:e,uploading:a,src:c,files:r,uploadAvatar:m}}},mt={class:"flex flex-col items-center"},pt=["src"],vt={class:"text-center py-10"},yt={class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",for:"single"},_t=["disabled"];function ht(i,s,l,e,a,c){return d(),u("div",null,[t("div",mt,[e.src?(d(),u("img",{key:0,src:e.src,alt:"Avatar",class:"avatar image",style:O({height:e.size,width:e.size})},null,12,pt)):(d(),u("div",{key:1,class:"avatar no-image",style:O({height:e.size,width:e.size})},null,4)),t("div",vt,[t("label",yt,v(e.uploading?"Uploading ...":"Upload new Picture"),1),t("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",onChange:s[0]||(s[0]=(...r)=>e.uploadAvatar&&e.uploadAvatar(...r)),disabled:e.uploading},null,40,_t)])])])}var ft=A(ut,[["render",ht]]);const xt={components:{Avatar:ft},setup(){const i=n(!0),s=n(""),l=n(""),e=n(""),a=n(""),c=n(null),r=n(null);async function o(){try{i.value=!0,T.user=I.auth.user();let{data:p,error:y,status:U}=await I.from("profiles").select("username, gender, avatar_url, interests").eq("id",T.user.id).single();if(y&&U!==406)throw y;p&&(s.value=p.username,l.value=p.gender,a.value=p.avatar_url,e.value=p.interests)}catch(p){alert(p.message)}finally{i.value=!1}}async function m(){try{i.value=!0,T.user=I.auth.user();const p={id:T.user.id,username:s.value,gender:l.value,avatar_url:a.value,updated_at:new Date,interests:e.value};let{error:y}=await I.from("profiles").upsert(p,{returning:"minimal"});if(r.value="Profile successfully updated.",setTimeout(()=>{r.value=null},5e3),y)throw y}catch(p){c.value=p.message,setTimeout(()=>{r.value=null},5e3)}finally{i.value=!1}}return Y(()=>{o()}),{store:T,loading:i,username:s,gender:l,avatar_url:a,interests:e,errorMsg:c,statusMsg:r,updateProfile:m}}},gt={class:"max-w-screen-sm mx-auto px-4 py-10"},bt={key:0,class:"mb-10 p-4 rounded-md shadow-md bg-light-grey"},wt={class:"test-primaryc"},At={class:"test-red-500"},kt={class:"flex flex-col mb-2"},$t=t("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),Ut=["value"],Lt={class:"flex flex-col mb-2"},Mt=t("label",{for:"username",class:"mb-1 text-sm text-primaryc"},"Username",-1),Pt={class:"flex flex-col mb-2"},It=t("label",{for:"gender",class:"mb-1 text-sm text-primaryc"},"Gender",-1),Vt={class:"flex flex-col mb-2"},Ct=t("label",{for:"interests",class:"mb-1 text-sm text-primaryc"},"Interests",-1),Tt=["value","disabled"];function Nt(i,s,l,e,a,c){const r=$("Avatar");return d(),u("div",gt,[e.statusMsg||e.errorMsg?(d(),u("div",bt,[t("p",wt,v(e.statusMsg),1),t("p",At,v(e.errorMsg),1)])):_("",!0),t("form",{onSubmit:s[4]||(s[4]=q((...o)=>e.updateProfile&&e.updateProfile(...o),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[M(r,{path:e.avatar_url,"onUpdate:path":s[0]||(s[0]=o=>e.avatar_url=o),onUpload:e.updateProfile},null,8,["path","onUpload"]),t("div",kt,[$t,t("input",{id:"email",type:"text",value:e.store.user.email,disabled:"",required:"",class:"p-2 text-gray-500 focus:outline-none"},null,8,Ut)]),t("div",Lt,[Mt,h(t("input",{id:"username",type:"text",placeholder:"Please set a Username","onUpdate:modelValue":s[1]||(s[1]=o=>e.username=o),class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.username]])]),t("div",Pt,[It,h(t("input",{id:"gender",type:"text",placeholder:"Please set a Gender.","onUpdate:modelValue":s[2]||(s[2]=o=>e.gender=o),class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.gender]])]),t("div",Vt,[Ct,h(t("textarea",{id:"interests",type:"textarea","onUpdate:modelValue":s[3]||(s[3]=o=>e.interests=o),placeholder:"Write something about yourself.",rows:"4",class:"p-2 h-50 text-gray-500 focus:outline-none resize-none"},null,512),[[f,e.interests]])]),t("button",{type:"submit",value:e.loading?"Loading ...":"Update",disabled:e.loading,class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"},"Update",8,Tt)],32)])}var qt=A(xt,[["render",Nt]]),Ot="assets/trash.8e4eb5f3.png";const jt={setup(){const i=n(""),s=n("select-activity"),l=n(""),e=n([]),a=n(""),c=n(""),r=n(""),o=n(null),m=n(null),p=()=>{if(s.value==="others"){e.value.push({id:K(),description:""});return}};return{ActivityName:i,ActivityType:s,ActivityDescription:l,ActivityDate:a,ActivityTime:c,ActivityLocation:r,activity:e,statusMsg:o,errorMsg:m,addActivity:p,removeActivity:V=>{if(e.value.length>1){e.value=e.value.filter(b=>b.id!==V);return}m.value="You must have at least one activity",setTimeout(()=>{m.value=null},5e3)},activityChange:()=>{e.value=[],p()},createActivity:async V=>{try{const{error:b}=await g.from("activities").insert({name:i.value,type:s.value,date:a.value,time:c.value,location:r.value,activity:e.value});if(b)throw b;o.value="Sucess. Activity Created",i.value=null,s.value="select-activity",e.value=[],setTimeout(()=>{o.value=null},5e3)}catch(b){m.value=b.message,setTimeout(()=>{m.value=null},5e3)}}}}},zt={class:"max-w-screen-md mx-auto px-4 py-10"},Dt={key:0,class:"mb-10 p-4 bg-light-grey rounded-md"},Rt={class:"text-black-500"},St={class:"text-red-500"},Jt={class:"p-8 flex items-start bg-light-grey rounded-md shadow-lg"},Et=t("h1",{class:"text-2xl text-primaryc"},"Create an Activity",-1),Ft={class:"flex flex-col"},Bt=t("label",{for:"activity-name",class:"mb-1 text-sm text-primaryc"},"Activity Name",-1),Ht={class:"flex flex-col"},Gt=t("label",{for:"select-activity",class:"mb-1 text-sm text-primaryc"},"Activity Type",-1),Yt=t("option",{value:"select-activity"},"Select Activity Type",-1),Zt=t("option",{value:"sports"},"Sports",-1),Kt=t("option",{value:"others"},"Others",-1),Xt=[Yt,Zt,Kt],Qt={key:0,class:"flex flex-col py-4 gap-y-4"},Wt={class:"flex flex-col md:w-2/3"},es=t("label",{for:"activity",class:"mb-1 text-sm text-primaryc"}," Activity Description ",-1),ts=["onUpdate:modelValue"],ss={class:"flex flex-col flex-1"},rs=t("label",{for:"duration",class:"mb-1 text-sm text-primaryc"}," Duration ",-1),os=["onUpdate:modelValue"],as=["onClick"],is={class:"flex flex-col"},ns=t("label",{for:"activity-date",class:"mb-1 text-sm text-primaryc"},"Activity Date",-1),ls={class:"flex flex-col"},cs=t("label",{for:"activity-time",class:"mb-1 text-sm text-primaryc"},"Activity Time",-1),ds={class:"flex flex-col"},us=t("label",{for:"activity-location",class:"mb-1 text-sm text-primaryc"},"Activity Location",-1),ms=t("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Create ",-1);function ps(i,s,l,e,a,c){return d(),u("div",zt,[e.statusMsg||e.errorMsg?(d(),u("div",Dt,[t("p",Rt,v(e.statusMsg),1),t("p",St,v(e.errorMsg),1)])):_("",!0),t("div",Jt,[t("form",{onSubmit:s[7]||(s[7]=q((...r)=>e.createActivity&&e.createActivity(...r),["prevent"])),class:"flex flex-col gap-y-5 w-full"},[Et,t("div",Ft,[Bt,h(t("input",{type:"text",required:"",class:"p-2 text-gray-500 focus:outline-none",placeholder:"Activity Name",id:"activity-name","onUpdate:modelValue":s[0]||(s[0]=r=>e.ActivityName=r)},null,512),[[f,e.ActivityName]])]),t("div",Ht,[Gt,h(t("select",{required:"",class:"p-2 text-gray-500 focus:outline-none",id:"select-activity",onChange:s[1]||(s[1]=(...r)=>e.activityChange&&e.activityChange(...r)),"onUpdate:modelValue":s[2]||(s[2]=r=>e.ActivityType=r)},Xt,544),[[Z,e.ActivityType]]),e.ActivityType==="others"?(d(),u("div",Qt,[(d(!0),u(D,null,R(e.activity,(r,o)=>(d(),u("div",{class:"flex flex-col gap-x-6 gap-y-2 relative md:flex-row",key:o},[t("div",Wt,[es,h(t("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":m=>r.description=m},null,8,ts),[[f,r.description]])]),t("div",ss,[rs,h(t("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":m=>r.duration=m},null,8,os),[[f,r.duration]]),t("img",{onClick:m=>e.removeActivity(r.id),src:Ot,class:"h-4 w-auto absolute -left-5 cursor-pointer",alt:""},null,8,as)])]))),128)),t("button",{onClick:s[3]||(s[3]=(...r)=>e.addActivity&&e.addActivity(...r)),class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Add Activity ")])):_("",!0)]),t("div",is,[ns,h(t("input",{required:"",type:"date",class:"p-2 text-gray-500 focus:outline-none",id:"activity-date","onUpdate:modelValue":s[4]||(s[4]=r=>e.ActivityDate=r)},null,512),[[f,e.ActivityDate]])]),t("div",ls,[cs,h(t("input",{required:"",type:"time",class:"p-2 text-gray-500 focus:outline-none",id:"activity-time","onUpdate:modelValue":s[5]||(s[5]=r=>e.ActivityTime=r)},null,512),[[f,e.ActivityTime]])]),t("div",ds,[us,h(t("input",{required:"",type:"text",class:"p-2 text-gray-500 focus:outline-none",id:"activity-location","onUpdate:modelValue":s[6]||(s[6]=r=>e.ActivityLocation=r)},null,512),[[f,e.ActivityLocation]])]),ms],32)])])}var vs=A(jt,[["render",ps]]);const ys={name:"view-activity",setup(){const i=n(null),s=n(null),l=n(null),e=n(null),a=n(null),c=H(),r=E(()=>j.state.user),o=n(null),m=n(null),p=n(null);let y;const U=c.params.id,N=async()=>{try{const{data:x,error:w}=await g.from("activities").select("*").eq("id",U);if(w)throw w;i.value=x[0],l.value=!0}catch(x){e.value=x.message,setTimeout(()=>{e.value=null},5e3)}};N(),(async()=>{try{const{data:x,error:w}=await g.from("profiles").select("username").eq("id",r.value.id);if(w)throw w;p.value=x[0].username,y=x[0].username}catch(x){e.calue=x.message,setTimeout(()=>{e.value=null},5e3)}})(r.value.id);const b=async()=>{const x=[];let w=[];try{const{data:L,error:Ys}=await g.from("instanceOfActivities").select("user").eq("activity_id",U);x.value=L}catch(L){e.value=L.message,setTimeout(()=>{e.value=null},5e3)}x.value.forEach(L=>{w.push(L.user)}),m.value=!0,o.value=w};return b(),{data:i,dataLoaded:l,errorMsg:e,statusMsg:a,getData:N,user:r,joinActivity:async x=>{try{const{data:w,error:L}=await g.from("instanceOfActivities").insert({activity_id:U,user:x});if(L)throw L;a.value="You joined this activity",setTimeout(()=>{a.value=null},5e3)}catch(w){e.value=w.message,setTimeout(()=>{e.value=null},5e3)}window.location.reload()},checkParticipation:b,members:o,membersLoaded:m,username:p,userParticipated:s}}},_s={class:"max-w-screen-sm mx-auto px-4 py-10"},hs={key:0,class:"mb-10 p-4 rounded-md shadow-md bg-light-grey"},fs={class:"test-primaryc"},xs={class:"test-red-500"},gs={key:1},bs={class:"flex flex-col items-center p-8 rounded-md shadow-md bg-light-grey relative"},ws={class:"mt-2 py-1 px-3 text-xs text-white bg-primaryc shadow-md rounded-lg"},As={class:"mt-2 text-center text-xl text-primaryc"},ks={class:"mt-2 text-center text-xl text-primaryc"},$s={key:0,class:"mt-2 text-center text-xl text-primaryc"},Us={key:1,class:"mt-2 text-center text-xl text-primaryc"},Ls={class:"mt-2 text-center text-xl text-primaryc cursor-pointer"},Ms={key:2,class:"flex self-center gap-x-2"},Ps={key:3,class:"flex self-center gap-x-2"};function Is(i,s,l,e,a,c){const r=$("router-link");return d(),u("div",_s,[e.statusMsg||e.errorMsg?(d(),u("div",hs,[t("p",fs,v(e.statusMsg),1),t("p",xs,v(e.errorMsg),1)])):_("",!0),e.dataLoaded?(d(),u("div",gs,[t("div",bs,[t("p",ws,v(e.data.date)+" - "+v(e.data.type),1),t("h1",As,v(e.data.name),1),t("p",ks," In "+v(e.data.location)+" at "+v(e.data.time),1),e.data.type=="others"?(d(),u("p",$s," Doing "+v(e.data.activity[0].description)+" for "+v(e.data.activity[0].duration),1)):_("",!0),e.membersLoaded?(d(),u("p",Us," people participating: ")):_("",!0),(d(!0),u(D,null,R(e.members,(o,m)=>(d(),C(r,{to:{name:"ViewProfile",params:{username:o}},key:m},{default:k(()=>[t("p",Ls,v(o),1)]),_:2},1032,["to"]))),128)),e.members!=null&&e.members.includes(e.username)?(d(),u("div",Ms,[t("div",{class:"mt-2 py-2 px-6 rounded-sm self-start cursor-pointer text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",onClick:s[0]||(s[0]=o=>e.joinActivity(e.username))}," Leave this Activity ")])):(d(),u("div",Ps,[t("div",{class:"mt-2 py-2 px-6 rounded-sm self-start cursor-pointer text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",onClick:s[1]||(s[1]=o=>e.joinActivity(e.username))}," Join this Activity ")]))])])):_("",!0)])}var Vs=A(ys,[["render",Is]]);const Cs={props:{path:String},setup(i){const{path:s}=F(i),l=n("30em"),e=n(!1),a=n(""),c=n(),r=async()=>{try{const{data:o,error:m}=await I.storage.from("avatars").download(s.value);if(m)throw m;a.value=URL.createObjectURL(o)}catch(o){console.error("Error downloading image: ",o.message)}};return B(s,()=>{s.value&&r()}),{path:s,size:l,uploading:e,src:a,files:c}}},Ts={class:"flex flex-col items-center"},Ns=["src"];function qs(i,s,l,e,a,c){return d(),u("div",null,[t("div",Ts,[e.src?(d(),u("img",{key:0,src:e.src,alt:"Avatar",class:"avatar image",style:O({height:e.size,width:e.size})},null,12,Ns)):(d(),u("div",{key:1,class:"avatar no-image",style:O({height:e.size,width:e.size})},null,4))])])}var Os=A(Cs,[["render",qs]]);const js={name:"view-profile",components:{Avatar:Os},setup(){const i=n(null),s=H(),l=n(!0),e=n(""),a=n(""),c=n(""),r=s.params.username;async function o(){try{l.value=!0,j.user=g.auth.user();let{data:m,error:p,status:y}=await g.from("profiles").select("username, gender, avatar_url").eq("username",r).single();if(p&&y!==406)throw p;m&&(e.value=m.username,a.value=m.gender,c.value=m.avatar_url,i.value=!0,console.log(c.value))}catch(m){alert(m.message)}finally{l.value=!1}}return o(),{dataLoaded:i,loading:l,username:e,gender:a,avatar_url:c}}},zs={class:"max-w-screen-sm mx-auto px-4 py-10"},Ds={class:"p-8 flex flex-col items-center bg-light-grey rounded-md shadow-lg"},Rs={class:"text-primaryc text-xl"},Ss={class:"text-primaryc"},Js=t("p",{class:"text-primaryc"},"Location:",-1);function Es(i,s,l,e,a,c){const r=$("Avatar");return d(),u("div",zs,[t("div",Ds,[t("h1",Rs,"Profile of "+v(e.username),1),M(r,{path:e.avatar_url,"onUpdate:path":s[0]||(s[0]=o=>e.avatar_url=o)},null,8,["path"]),t("p",Ss,"Gender: "+v(e.gender),1),Js])])}var Fs=A(js,[["render",Es]]);const Bs=[{path:"/",name:"Home",component:Ce},{path:"/login",name:"Login",component:He},{path:"/register",name:"Register",component:lt},{path:"/profile",name:"Profile",component:qt},{path:"/activity",name:"Activity",component:vs},{path:"/view-activity/:id",name:"ViewActivity",component:Vs},{path:"/view-profile/:username",name:"ViewProfile",component:Fs}],Hs=X({history:Q(),routes:Bs});W(ge).use(Hs).mount("#app");
